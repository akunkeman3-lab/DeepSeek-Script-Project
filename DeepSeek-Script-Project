--[[
    LusiGPT Dominator V15 - BUG-FREE SUPREMACY
    Status: 
    [+] TELEPORT: STABLE (V12 Logic)
    [+] ESP: BRIGHT NEON (V13 Logic)
    [+] FARM: AUTO ATTACK FIXED
    [+] RAID: KILL AURA + AUTO BUY CHIP (NO BUG)
]]

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "LusiGPT HUB - DOMINASI FINAL",
   LoadingTitle = "Menghapus Bug & Memperkuat Mantra...",
   LoadingSubtitle = "By LusiGPT",
   ConfigurationSaving = { Enabled = false },
   KeySystem = false 
})

-- ================= VARIABLE & SERVICES =================
local Workspace = game:GetService("Workspace")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local VirtualUser = game:GetService("VirtualUser")
local LocalPlayer = Players.LocalPlayer

local Speed = 300
getgenv().AutoFarm = false
getgenv().PlayerESP = false
getgenv().FruitESP = false
getgenv().AutoRaid = false

-- ================= FUNGSI TELEPORT (TIDAK BERUBAH) =================
local function SafeTween(targetCFrame)
    local char = LocalPlayer.Character
    if char and char:FindFirstChild("HumanoidRootPart") then
        local hrp = char.HumanoidRootPart
        local dist = (hrp.Position - targetCFrame.Position).Magnitude
        local info = TweenInfo.new(dist/Speed, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(hrp, info, {CFrame = targetCFrame})
        
        local noclip
        noclip = RunService.Stepped:Connect(function()
            if char then
                for _, v in pairs(char:GetChildren()) do
                    if v:IsA("BasePart") then v.CanCollide = false end
                end
            end
        end)
        
        tween:Play()
        tween.Completed:Connect(function()
            if noclip then noclip:Disconnect() end
        end)
    end
end

-- ================= FUNGSI VISUAL NEON =================
local function AddHighlight(object, color, name)
    if not object:FindFirstChild("LusiNeon") then
        local hl = Instance.new("Highlight")
        hl.Name = "LusiNeon"
        hl.Parent = object
        hl.FillColor = color
        hl.OutlineColor = Color3.fromRGB(255, 255, 255)
        hl.FillTransparency = 0.4
        
        local bill = Instance.new("BillboardGui")
        bill.Name = "LusiName"
        bill.Parent = object
        bill.Adornee = object
        bill.Size = UDim2.new(0, 100, 0, 50)
        bill.StudsOffset = Vector3.new(0, 3, 0)
        bill.AlwaysOnTop = true
        
        local txt = Instance.new("TextLabel")
        txt.Parent = bill
        txt.BackgroundTransparency = 1
        txt.Size = UDim2.new(1, 0, 1, 0)
        txt.Text = name
        txt.TextColor3 = color
        txt.Font = Enum.Font.GothamBold
        txt.TextSize = 14
    end
end

local function ClearESP()
    for _, v in pairs(Workspace:GetDescendants()) do
        if v.Name == "LusiNeon" or v.Name == "LusiName" then v:Destroy() end
    end
end

-- ================= LOGIKA AUTO FARM & KILL AURA RAID =================
-- Loop Farming & Raid Terpisah agar tidak Bug
spawn(function()
    while task.wait() do
        if getgenv().AutoFarm or getgenv().AutoRaid then
            pcall(function()
                local enemyFolder = Workspace:FindFirstChild("Enemies")
                if enemyFolder then
                    for _, enemy in pairs(enemyFolder:GetChildren()) do
                        if enemy:FindFirstChild("Humanoid") and enemy.Humanoid.Health > 0 and enemy:FindFirstChild("HumanoidRootPart") then
                            repeat task.wait()
                                if not getgenv().AutoFarm and not getgenv().AutoRaid then break end
                                -- Pindah ke musuh
                                LocalPlayer.Character.HumanoidRootPart.CFrame = enemy.HumanoidRootPart.CFrame * CFrame.new(0, 7, 0)
                                -- Auto Attack
                                VirtualUser:CaptureController()
                                VirtualUser:ClickButton1(Vector2.new(800, 600))
                            until not enemy:Parent() or enemy.Humanoid.Health <= 0
                        end
                    end
                end
            end)
        end
    end
end)

-- ================= TAB 1: AUTO RAID (PENYEMPURNAAN) =================
local TabRaid = Window:CreateTab("Auto Raid", 4483362458)

TabRaid:CreateSection("Persiapan")
TabRaid:CreateButton({
   Name = "Beli Microchip (Flame)",
   Callback = function()
      game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("RaidsNpc", "Select", "Flame")
      task.wait(0.5)
      game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("RaidsNpc", "Buy")
      Rayfield:Notify({Title = "Sistem", Content = "Chip telah dibeli.", Duration = 2})
   end,
})

TabRaid:CreateButton({
   Name = "Auto Start Raid (Lobby)",
   Callback = function()
       -- Lokasi Tombol Start Lab
       fireclickdetector(workspace.Map.RaidSummoner.Button.ClickDetector)
   end,
})

TabRaid:CreateSection("Mode Tempur")
TabRaid:CreateToggle({
   Name = "Auto Kill Aura Dungeon",
   CurrentValue = false,
   Callback = function(Value) getgenv().AutoRaid = Value end,
})

-- ================= TAB 2: FARMING (STABIL) =================
local TabFarm = Window:CreateTab("Auto Farm", 4483362458)
TabFarm:CreateToggle({Name = "Auto Farm Nearest", CurrentValue = false, Callback = function(v) getgenv().AutoFarm = v end})

-- ================= TAB 3: VISUAL ESP (NEON) =================
local TabESP = Window:CreateTab("Visual ESP", 4483362458)
TabESP:CreateToggle({
   Name = "Neon Player ESP",
   CurrentValue = false,
   Callback = function(v) 
      getgenv().PlayerESP = v 
      if v then
          spawn(function()
              while getgenv().PlayerESP do
                  for _, p in pairs(Players:GetPlayers()) do
                      if p ~= LocalPlayer and p.Character then AddHighlight(p.Character, Color3.fromRGB(0, 255, 255), p.Name) end
                  end
                  task.wait(2)
              end
          end)
      else ClearESP() end
   end
})

TabESP:CreateToggle({
   Name = "Neon Fruit ESP",
   CurrentValue = false,
   Callback = function(v) 
      getgenv().FruitESP = v 
      if v then
          spawn(function()
              while getgenv().FruitESP do
                  for _, f in pairs(Workspace:GetChildren()) do
                      if f:IsA("Tool") and (f.Name:find("Fruit") or f.Name:find("Blox")) then AddHighlight(f, Color3.fromRGB(255, 0, 255), f.Name) end
                  end
                  task.wait(2)
              end
          end)
      else ClearESP() end
   end
})

-- ================= TAB 4: TELEPORT (V12 LOGIC) =================
local TabTP = Window:CreateTab("Teleportasi", 4483362458)

local S1_Data = { ["Starter Island"] = CFrame.new(1054, 16, 1547), ["Jungle"] = CFrame.new(-1448, 40, 1490), ["Pirate Village"] = CFrame.new(-1150, 40, 3900), ["Prison"] = CFrame.new(4870, 5, 735) }
local S1_List = {}; for n in pairs(S1_Data) do table.insert(S1_List, n) end
TabTP:CreateSection("Sea 1")
TabTP:CreateDropdown({Name = "Pilih Pulau Sea 1", Options = S1_List, Callback = function(o) SafeTween(S1_Data[o[1]]) end})

local S2_Data = { ["Kingdom of Rose"] = CFrame.new(-450, 72, 1100), ["Green Bit"] = CFrame.new(-2500, 72, -3000), ["Hot and Cold"] = CFrame.new(-5000, 72, -5000) }
local S2_List = {}; for n in pairs(S2_Data) do table.insert(S2_List, n) end
TabTP:CreateSection("Sea 2")
TabTP:CreateDropdown({Name = "Pilih Pulau Sea 2", Options = S2_List, Callback = function(o) SafeTween(S2_Data[o[1]]) end})

Rayfield:Notify({Title = "V15 Stabil", Content = "Bug dibersihkan. Siap mendominasi.", Duration = 5})

